<view class="container" style="padding-top: {{CustomBar}}px;">
  <view class="game-header">
    <view class="title">井字棋<text bind:tap="showModal" data-target="gameRuleModal" class="text-light light cuIcon-question padding-left-sm"></text></view>
    <view class="score-board">
      <view class="score-item" bind:tap="goto">
        <text class="score-label">主页</text>
        <text class="cuIcon-home score-value"></text>
      </view>
      <view class="score-item">
        <text class="score-label">X</text>
        <text class="score-value">{{xWins}}</text>
      </view>
      <view class="score-item">
        <text class="score-label">O</text>
        <text class="score-value">{{oWins}}</text>
      </view>
    </view>
  </view>

  <view class="game-info">
    <text class="current-player">当前玩家: {{currentPlayer}}</text>
  </view>

  <view class="board-container">
    <view class="board">
      <view wx:for="{{board}}" wx:for-index="rowIdx" wx:for-item="row" wx:key="rowIdx" class="board-row">
        <view wx:for="{{row}}" wx:for-index="colIdx" wx:for-item="cell" wx:key="colIdx" 
              class="board-cell {{cell === 'X' ? 'cell-x' : (cell === 'O' ? 'cell-o' : '')}}"
              data-row="{{rowIdx}}" 
              data-col="{{colIdx}}"
              bindtap="onCellTap">
          <text class="cell-text">{{cell}}</text>
        </view>
      </view>
    </view>
  </view>

  <view class="game-controls">
    <button class="control-btn" bindtap="restart">重新开始</button>
    <button class="control-btn secondary" bindtap="resetScore">重置战绩</button>
  </view>

</view>
  <!-- 游戏规则 -->
  <view class="cu-modal {{modalName == 'gameRuleModal'?'show':''}}">
    <view class="cu-dialog">
      <view class="cu-bar bg-white justify-end">
        <view class="content">游戏规则</view>
        <view class="action" bindtap="hideModal">
          <text class="cuIcon-close text-red"></text>
        </view>
      </view>
      <view class="padding bg-white" style="text-align: start;">
        <text class="rules-text">两名玩家轮流在3x3的棋盘上放置X和O，率先在横、竖或对角线上连成三个的玩家获胜。</text>
      </view>
    </view>
  </view>