<view class="container" style="padding-top:{{CustomBar}}px;">
  <view class="game-header">
    <view class="title">记忆翻牌<text bind:tap="showModal" data-target="gameRuleModal" class="text-light light cuIcon-question padding-left-sm"></text></view>
    <view class="stats">
      <view class="stat-item" bind:tap="goto">
        <text class="score-label">主页</text>
        <text class="cuIcon-home score-value"></text>
      </view>
      <view class="stat-item">
        <text class="stat-label">步数</text>
        <text class="stat-value">{{moves}}</text>
      </view>
      <view class="stat-item">
        <text class="stat-label">最佳</text>
        <text class="stat-value">{{bestScore || '-'}}</text>
      </view>
    </view>
  </view>

  <view class="game-board">
    <view class="cards-grid">
      <view wx:for="{{cards}}" wx:key="id" 
            class="card {{item.flipped ? 'flipped' : ''}} {{item.matched ? 'matched' : ''}}"
            data-id="{{item.id}}"
            bindtap="onCardTap">
        <view class="card-inner">
          <view class="card-front">
            <text class="card-emoji">?</text>
          </view>
          <view class="card-back">
            <text class="card-emoji">{{item.value}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <view class="game-controls">
    <button class="control-btn" bindtap="restart">重新开始</button>
    <button class="control-btn secondary" bindtap="resetBestScore">重置最佳</button>
  </view>

  <view wx:if="{{gameOver}}" class="game-over">
    <text class="game-over-text">🎉 恭喜完成！</text>
  </view>

</view>
<!-- 游戏规则 -->
<view class="cu-modal {{modalName == 'gameRuleModal'?'show':''}}">
    <view class="cu-dialog">
      <view class="cu-bar bg-white justify-end">
        <view class="content">游戏规则</view>
        <view class="action" bindtap="hideModal">
          <text class="cuIcon-close text-red"></text>
        </view>
      </view>
      <view class="padding bg-white" style="text-align: start;">
        <text class="rules-text">点击卡片翻开，找到相同的两张卡片即可消除。用最少的步数完成所有配对！</text>
      </view>
    </view>
  </view>